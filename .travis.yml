os: osx
osx_image: xcode11.3
language: swift
env: 
  global:
  - LC_CTYPE=en_US.UTF-8
  - LANG=en_US.UTF-8
  - WORKSPACE=LocaleComplete.xcworkspace
  - IOS_FRAMEWORK_SCHEME="LocaleComplete"
  - MACOS_FRAMEWORK_SCHEME="LocaleComplete macOS"
  - WATCHOS_FRAMEWORK_SCHEME="LocaleComplete watchOS"
  - TVOS_FRAMEWORK_SCHEME="LocaleComplete tvOS"
  matrix:
  - DESTINATION="OS=13.2,name=iPhone 11"       SCHEME="$IOS_FRAMEWORK_SCHEME" SDK="iphoneos13.2"  
  - DESTINATION="OS=5.2,name=Apple Watch Series 5 - 44mm" SCHEME="$WATCHOS_FRAMEWORK_SCHEME" SDK="watchos6.1" 
  - DESTINATION="arch=x86_64" SCHEME="$MACOS_FRAMEWORK_SCHEME" SDK="macosx10.15"
  - DESTINATION="OS=13.2,name=Apple TV"       SCHEME="$TVOS_FRAMEWORK_SCHEME" SDK="appletvos13.2"
  
script:
  - set -o pipefail
  - xcodebuild -version
  
  - xcodebuild -workspace "$WORKSPACE" -list
  
  - xcodebuild -workspace "$WORKSPACE" -scheme "$SCHEME" -destination "$DESTINATION" -sdk "$SDK" -configuration Debug ONLY_ACTIVE_ARCH=NO build | xcpretty;
